import{u as e,j as t,I as a,a9 as n,B as i,a6 as s,r,a4 as l,U as o,V as d,a7 as c}from"./index-32c3357d.js";import{o as m,P as h,D as u,a as x,b as p,d as j,s as k,T as y,S as g}from"./ShareModal-d881e5fb.js";import{R as f,u as w}from"./RobotOutlined-d916cdba.js";import{C,T as N,E as I}from"./index-8826920f.js";import{F as S}from"./index-8d9b92bb.js";import{u as q}from"./useQuery-77691717.js";import{R as L,C as b}from"./row-4d2b6eab.js";import"./__commonjsHelpers__-02d3be64.js";function v(){const{t:v}=e(),T=[{key:"email",title:v("token.email"),dataIndex:["account","email"],width:120,render:e=>t.jsx(a,{value:e,onClick:t=>m(e,v,t),readOnly:!0})},{key:"uniqueName",title:"Unique Name",dataIndex:"uniqueName",align:"center",width:120},{key:"password",title:v("token.password"),dataIndex:"password",align:"center",width:120},{key:"gpt35Limit",title:v("token.gpt35Limit"),dataIndex:"gpt35Limit",align:"center",width:120,render:e=>-1==e?"无限制":e},{key:"gpt4Limit",title:v("token.gpt4Limit"),dataIndex:"gpt4Limit",align:"center",width:120,render:e=>-1==e?"无限制":e},{key:"refreshEveryday",title:v("token.refreshEveryday"),dataIndex:"refreshEveryday",align:"center",width:120,render:e=>e?t.jsx(C,{}):t.jsx(n,{})},{key:"temporaryChat",title:v("token.temporaryChat"),dataIndex:"temporaryChat",align:"center",width:80,render:e=>e?t.jsx(C,{}):t.jsx(n,{})},{key:"expiresAt",title:v("token.expiresAt"),dataIndex:"expiresAt",align:"center",width:120,render:e=>""==e?"未知":e},{key:"shareToken",title:"Share Token",dataIndex:"shareToken",align:"center",width:120,render:e=>t.jsx(a,{value:e,onClick:t=>m(e,v,t),readOnly:!0})},{key:"comment",title:v("token.comment"),dataIndex:"comment",align:"center",render:e=>t.jsx(N.Text,{style:{maxWidth:500},ellipsis:!0,children:e})},{title:v("token.action"),key:"operation",align:"center",render:(e,a)=>t.jsxs(i.Group,{children:[t.jsx(s,{title:"登录并跳转至对话",placement:"bottom",children:t.jsx(i,{icon:t.jsx(f,{}),type:"primary",onClick:()=>Q(a)})}),t.jsx(i,{icon:t.jsx(I,{}),type:"primary",onClick:()=>P(a)}),t.jsx(h,{title:v("token.deleteConfirm"),okText:"Yes",cancelText:"No",placement:"left",onConfirm:()=>Y(a),children:t.jsx(i,{icon:t.jsx(u,{}),type:"primary",loading:D==a.accountId+a.uniqueName,danger:!0})})]})}],F=["uniqueName","gpt4Limit","expiresAt","comment","operation"],E=T.map((e=>e.key)),O=x(),_=p(),[A,V]=r.useState(!1),z=w(),[R]=S.useForm(),U=S.useWatch("email",R),W=S.useWatch("uniqueName",R),[K,B]=r.useState(F),[D,G]=r.useState(void 0),[H,M]=r.useState({formValue:{...j},title:v("token.edit"),show:!1,onOk:e=>{M((e=>({...e,show:!1})))},onCancel:()=>{M((e=>({...e,show:!1})))}});r.useEffect((()=>{R.setFieldValue("email",z.get("email"))}),[z]);const P=e=>{M({formValue:e,title:v("token.edit"),show:!0,onOk:(e,t)=>{_.mutate(e,{onSuccess:()=>{M((e=>({...e,show:!1})))},onSettled:()=>t(!1)})},onCancel:()=>{M((e=>({...e,show:!1})))}})},Q=e=>{V(!0),l.info({content:"正在跳转至对话...",key:"chatLogin",duration:5}),k.chatLoginShare(e.uniqueName,e.password).then((e=>{e&&window.open(e,"_blank")})).finally((()=>{V(!1)}))},Y=e=>{G(e.accountId+e.uniqueName),O.mutate(e,{onSettled:()=>{G(void 0)}})},{data:J}=q({queryKey:["shareList","chatgpt",U,W],queryFn:()=>k.searchShare("chatgpt",U,W)}),X=T.map((e=>({...e,hidden:!K.includes(e.key)})));return t.jsxs(o,{direction:"vertical",size:"large",className:"w-full",children:[t.jsx(d,{children:t.jsx(S,{form:R,children:t.jsxs(L,{gutter:[16,16],children:[t.jsx(b,{span:6,lg:6,children:t.jsx(S.Item,{label:v("token.email"),name:"email",className:"!mb-0",children:t.jsx(a,{})})}),t.jsx(b,{span:6,lg:6,children:t.jsx(S.Item,{label:"Unique Name",name:"uniqueName",className:"!mb-0",children:t.jsx(a,{})})}),t.jsx(b,{span:12,lg:12,children:t.jsxs("div",{className:"flex justify-end",children:[t.jsx(i,{onClick:()=>{R.resetFields()},children:v("token.reset")}),t.jsx(i,{type:"primary",className:"ml-4",onClick:()=>{R.validateFields().then((e=>{R.submit()}))},children:v("token.search")})]})})]})})}),t.jsx(d,{title:v("token.shareList"),extra:t.jsx(c,{title:"abc",defaultChecked:!0,checkedChildren:"简洁",unCheckedChildren:"详细",onChange:e=>{B(e?[...F]:[...E])}}),children:t.jsx(y,{rowKey:e=>e.accountId+e.uniqueName,size:"small",scroll:{x:"max-content"},pagination:{pageSize:10},columns:X,dataSource:J,loading:A})}),t.jsx(g,{...H})]})}export{v as default};
